"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),$=jQuery,SquareShareables=function(){function SquareShareables(){_classCallCheck(this,SquareShareables),this.container=$(".shareable-container"),this.$inputImageField=$("#input-image"),this.$inputTextField=$("#input-text"),this.canvas=new ShareableCanvas({container:"canvas-container"}),this.bind()}return _createClass(SquareShareables,[{key:"bind",value:function(){var _this=this;$("#generate-shareable").on("click",function(){return _this.generateShareable()}),$("#download-shareable").on("click",function(){return _this.downloadShareable()})}},{key:"generateShareable",value:function(){var _this2=this;this.canvas.stage.clear(),this.canvas.update();var imageInput=this.$inputImageField;0===imageInput[0].files.length&&alert("no image!");var text=this.$inputTextField.val(),fontSize=$("input[name=shareable-font-size]:checked").val(),isQuote=$("#shareable-checkbox-boolean").is(":checked"),quoteAttribution=$("#shareable-quote-attribution").val();isQuote&&(text="“"+text+"”");var reader=new FileReader;reader.onload=function(file){var loadedImage=new Image;loadedImage.crossOrigin="Anonymous",loadedImage.onload=function(event){_this2.canvas.drawBackground(),_this2.canvas.addImage(loadedImage,1,1),_this2.canvas.addCenteredText(text,fontSize),isQuote&&_this2.canvas.addQuoteAttribution(quoteAttribution),_this2.canvas.addLogo(.125),_this2.canvas.addNovaraDotMedia()},loadedImage.src=file.target.result},reader.readAsDataURL(imageInput[0].files[0])}},{key:"downloadShareable",value:function(){var filename="novaramedia-square-shareable.png",link=document.getElementById("download-shareable");link.href=this.canvas.canvas.toDataURL(),link.download=filename}},{key:"toSlug",value:function(text){return text.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"")}}]),SquareShareables}();jQuery(window).load(function(){new SquareShareables});
//# sourceMappingURL=sourcemaps/square-shareable.js.map
