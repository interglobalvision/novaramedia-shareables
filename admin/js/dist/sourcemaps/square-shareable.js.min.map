{"version":3,"sources":["square-shareable.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$","jQuery","SquareShareables","this","container","$inputImageField","$inputTextField","canvas","ShareableCanvas","bind","value","_this","on","generateShareable","downloadShareable","_this2","stage","clear","update","imageInput","files","alert","text","val","fontSize","isQuote","is","quoteAttribution","reader","FileReader","onload","file","loadedImage","Image","crossOrigin","event","drawBackground","addImage","addCenteredText","addQuoteAttribution","addLogo","addNovaraDotMedia","src","result","readAsDataURL","filename","link","document","getElementById","href","toDataURL","download","toLowerCase","replace","window","load"],"mappings":"AAAA,YAIA,SAASA,iBAAgBC,SAAUC,aAAe,KAAMD,mBAAoBC,cAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,cAAe,WAAc,QAASC,kBAAiBC,OAAQC,OAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,MAAME,OAAQD,IAAK,CAAE,GAAIE,YAAaH,MAAMC,EAAIE,YAAWC,WAAaD,WAAWC,aAAc,EAAOD,WAAWE,cAAe,EAAU,SAAWF,cAAYA,WAAWG,UAAW,GAAMC,OAAOC,eAAeT,OAAQI,WAAWM,IAAKN,aAAiB,MAAO,UAAUR,YAAae,WAAYC,aAAiJ,MAA9HD,aAAYZ,iBAAiBH,YAAYiB,UAAWF,YAAiBC,aAAab,iBAAiBH,YAAagB,aAAqBhB,gBAM5hBkB,EAAIC,OAEJC,iBAAmB,WACrB,QAASA,oBACPtB,gBAAgBuB,KAAMD,kBAEtBC,KAAKC,UAAYJ,EAAE,wBAEnBG,KAAKE,iBAAmBL,EAAE,gBAC1BG,KAAKG,gBAAkBN,EAAE,eAEzBG,KAAKI,OAAS,GAAIC,kBAChBJ,UAAa,qBAIfD,KAAKM,OA2FP,MAxFAzB,cAAakB,mBACXN,IAAK,OACLc,MAAO,WACL,GAAIC,OAAQR,IAGZH,GAAE,uBAAuBY,GAAG,QAAS,WACnC,MAAOD,OAAME,sBAIfb,EAAE,uBAAuBY,GAAG,QAAS,WACnC,MAAOD,OAAMG,yBAIjBlB,IAAK,oBACLc,MAAO,WACL,GAAIK,QAASZ,IAGbA,MAAKI,OAAOS,MAAMC,QAClBd,KAAKI,OAAOW,QAGZ,IAAIC,YAAahB,KAAKE,gBAEa,KAA/Bc,WAAW,GAAGC,MAAM/B,QACtBgC,MAAM,YAIR,IAAIC,MAAOnB,KAAKG,gBAAgBiB,MAG5BC,SAAWxB,EAAE,2CAA2CuB,MAGxDE,QAAUzB,EAAE,+BAA+B0B,GAAG,YAC9CC,iBAAmB3B,EAAE,gCAAgCuB,KAErDE,WACFH,KAAO,IAAMA,KAAO,IAGtB,IAAIM,QAAS,GAAIC,WAEjBD,QAAOE,OAAS,SAAUC,MACxB,GAAIC,aAAc,GAAIC,MAEtBD,aAAYE,YAAc,YAC1BF,YAAYF,OAAS,SAAUK,OAE7BpB,OAAOR,OAAO6B,iBAEdrB,OAAOR,OAAO8B,SAASL,YAAa,EAAG,GAEvCjB,OAAOR,OAAO+B,gBAAgBhB,KAAME,UAEhCC,SACFV,OAAOR,OAAOgC,oBAAoBZ,kBAGpCZ,OAAOR,OAAOiC,QAAQ,MAEtBzB,OAAOR,OAAOkC,qBAGhBT,YAAYU,IAAMX,KAAK7C,OAAOyD,QAGhCf,OAAOgB,cAAczB,WAAW,GAAGC,MAAM,OAG3CxB,IAAK,oBACLc,MAAO,WACL,GAAImC,UAAW,mCACXC,KAAOC,SAASC,eAAe,qBACnCF,MAAKG,KAAO9C,KAAKI,OAAOA,OAAO2C,YAC/BJ,KAAKK,SAAWN,YAGlBjD,IAAK,SACLc,MAAO,SAAgBY,MACrB,MAAOA,MAAK8B,cAAcC,QAAQ,KAAM,KAAKA,QAAQ,WAAY,QAI9DnD,mBAKTD,QAAOqD,QAAQC,KAAK,WACK,GAAIrD","file":"../square-shareable.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true, esversion: 6 */\n\nvar $ = jQuery;\n\nvar SquareShareables = function () {\n  function SquareShareables() {\n    _classCallCheck(this, SquareShareables);\n\n    this.container = $('.shareable-container');\n\n    this.$inputImageField = $('#input-image');\n    this.$inputTextField = $('#input-text');\n\n    this.canvas = new ShareableCanvas({\n      'container': 'canvas-container'\n    });\n\n    // Bind stuff\n    this.bind();\n  }\n\n  _createClass(SquareShareables, [{\n    key: 'bind',\n    value: function bind() {\n      var _this = this;\n\n      // Generate shareable button\n      $('#generate-shareable').on('click', function () {\n        return _this.generateShareable();\n      });\n\n      // Download button\n      $('#download-shareable').on('click', function () {\n        return _this.downloadShareable();\n      });\n    }\n  }, {\n    key: 'generateShareable',\n    value: function generateShareable() {\n      var _this2 = this;\n\n      // Clean the canvas\n      this.canvas.stage.clear();\n      this.canvas.update();\n\n      // Get image\n      var imageInput = this.$inputImageField;\n\n      if (imageInput[0].files.length === 0) {\n        alert('no image!');\n      }\n\n      // Get text\n      var text = this.$inputTextField.val();\n\n      // Get font size\n      var fontSize = $('input[name=shareable-font-size]:checked').val();\n\n      // Quote?\n      var isQuote = $('#shareable-checkbox-boolean').is(':checked');\n      var quoteAttribution = $('#shareable-quote-attribution').val();\n\n      if (isQuote) {\n        text = '“' + text + '”';\n      }\n\n      var reader = new FileReader();\n\n      reader.onload = function (file) {\n        var loadedImage = new Image();\n\n        loadedImage.crossOrigin = 'Anonymous';\n        loadedImage.onload = function (event) {\n\n          _this2.canvas.drawBackground();\n\n          _this2.canvas.addImage(loadedImage, 1, 1);\n\n          _this2.canvas.addCenteredText(text, fontSize);\n\n          if (isQuote) {\n            _this2.canvas.addQuoteAttribution(quoteAttribution);\n          }\n\n          _this2.canvas.addLogo(.125);\n\n          _this2.canvas.addNovaraDotMedia();\n        };\n\n        loadedImage.src = file.target.result;\n      };\n\n      reader.readAsDataURL(imageInput[0].files[0]);\n    }\n  }, {\n    key: 'downloadShareable',\n    value: function downloadShareable() {\n      var filename = 'novaramedia-square-shareable.png';\n      var link = document.getElementById('download-shareable');\n      link.href = this.canvas.canvas.toDataURL();\n      link.download = filename;\n    }\n  }, {\n    key: 'toSlug',\n    value: function toSlug(text) {\n      return text.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\n    }\n  }]);\n\n  return SquareShareables;\n}();\n\n;\n\njQuery(window).load(function () {\n  var squareShareables = new SquareShareables();\n});"]}