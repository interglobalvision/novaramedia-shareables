{"version":3,"sources":["square-shareable.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$","jQuery","SquareShareables","this","container","$inputImageField","$inputTextField","canvas","ShareableCanvas","bind","value","_this","on","generateShareable","downloadShareable","_this2","stage","clear","update","imageInput","files","console","log","text","val","fontSize","addQuotes","is","reader","FileReader","onload","file","loadedImage","Image","crossOrigin","event","drawBackground","addImage","addQuote","addLogo","src","result","readAsDataURL","filename","toSlug","$postTitleField","link","document","getElementById","href","toDataURL","download","toLowerCase","replace","window","load"],"mappings":"AAAA,YAIA,SAASA,iBAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,cAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUR,EAAae,EAAYC,GAAiJ,MAA9HD,IAAYZ,EAAiBH,EAAYiB,UAAWF,GAAiBC,GAAab,EAAiBH,EAAagB,GAAqBhB,MAM5hBkB,EAAIC,OAEJC,iBAAmB,WACrB,QAASA,KACPtB,gBAAgBuB,KAAMD,GAEtBC,KAAKC,UAAYJ,EAAE,wBAEnBG,KAAKE,iBAAmBL,EAAE,gBAC1BG,KAAKG,gBAAkBN,EAAE,eAEzBG,KAAKI,OAAS,GAAIC,kBAChBJ,UAAa,qBAIfD,KAAKM,OAoFP,MAjFAzB,cAAakB,IACXN,IAAK,OACLc,MAAO,WACL,GAAIC,GAAQR,IAGZH,GAAE,uBAAuBY,GAAG,QAAS,WACnC,MAAOD,GAAME,sBAIfb,EAAE,uBAAuBY,GAAG,QAAS,WACnC,MAAOD,GAAMG,yBAIjBlB,IAAK,oBACLc,MAAO,WACL,GAAIK,GAASZ,IAGbA,MAAKI,OAAOS,MAAMC,QAClBd,KAAKI,OAAOW,QAGZ,IAAIC,GAAahB,KAAKE,gBAEa,KAA/Bc,EAAW,GAAGC,MAAM/B,QACtBgC,QAAQC,IAAI,UAId,IAAIC,GAAOpB,KAAKG,gBAAgBkB,MAG5BC,EAAWzB,EAAE,2CAA2CwB,MAGxDE,GAAY,CAEZ1B,GAAE,+BAA+B2B,GAAG,cACtCD,GAAY,EAGd,IAAIE,GAAS,GAAIC,WAEjBD,GAAOE,OAAS,SAAUC,GACxB,GAAIC,GAAc,GAAIC,MAEtBD,GAAYE,YAAc,YAC1BF,EAAYF,OAAS,SAAUK,GAE7BpB,EAAOR,OAAO6B,iBAEdrB,EAAOR,OAAO8B,SAASL,GAEvBjB,EAAOR,OAAO+B,SAASf,EAAME,EAAUC,GAEvCX,EAAOR,OAAOgC,WAGhBP,EAAYQ,IAAMT,EAAK7C,OAAOuD,QAGhCb,EAAOc,cAAcvB,EAAW,GAAGC,MAAM,OAG3CxB,IAAK,oBACLc,MAAO,WACL,GAAIiC,GAAWxC,KAAKyC,OAAOzC,KAAK0C,gBAAgBrB,OAAS,sBACrDsB,EAAOC,SAASC,eAAe,qBACnCF,GAAKG,KAAO9C,KAAKI,OAAOA,OAAO2C,YAC/BJ,EAAKK,SAAWR,KAGlB/C,IAAK,SACLc,MAAO,SAAgBa,GACrB,MAAOA,GAAK6B,cAAcC,QAAQ,KAAM,KAAKA,QAAQ,WAAY,QAI9DnD,IAKTD,QAAOqD,QAAQC,KAAK,WACK,GAAIrD","file":"../square-shareable.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true, esversion: 6 */\n\nvar $ = jQuery;\n\nvar SquareShareables = function () {\n  function SquareShareables() {\n    _classCallCheck(this, SquareShareables);\n\n    this.container = $('.shareable-container');\n\n    this.$inputImageField = $('#input-image');\n    this.$inputTextField = $('#input-text');\n\n    this.canvas = new ShareableCanvas({\n      'container': 'canvas-container'\n    });\n\n    // Bind stuff\n    this.bind();\n  }\n\n  _createClass(SquareShareables, [{\n    key: 'bind',\n    value: function bind() {\n      var _this = this;\n\n      // Generate shareable button\n      $('#generate-shareable').on('click', function () {\n        return _this.generateShareable();\n      });\n\n      // Download button\n      $('#download-shareable').on('click', function () {\n        return _this.downloadShareable();\n      });\n    }\n  }, {\n    key: 'generateShareable',\n    value: function generateShareable() {\n      var _this2 = this;\n\n      // Clean the canvas\n      this.canvas.stage.clear();\n      this.canvas.update();\n\n      // Get image\n      var imageInput = this.$inputImageField;\n\n      if (imageInput[0].files.length === 0) {\n        console.log('no file');\n      }\n\n      // Get text\n      var text = this.$inputTextField.val();\n\n      // Get font size\n      var fontSize = $('input[name=shareable-font-size]:checked').val();\n\n      // Add quotes?\n      var addQuotes = false;\n\n      if ($('#shareable-checkbox-boolean').is(':checked')) {\n        addQuotes = true;\n      }\n\n      var reader = new FileReader();\n\n      reader.onload = function (file) {\n        var loadedImage = new Image();\n\n        loadedImage.crossOrigin = 'Anonymous';\n        loadedImage.onload = function (event) {\n\n          _this2.canvas.drawBackground();\n\n          _this2.canvas.addImage(loadedImage);\n\n          _this2.canvas.addQuote(text, fontSize, addQuotes);\n\n          _this2.canvas.addLogo();\n        };\n\n        loadedImage.src = file.target.result;\n      };\n\n      reader.readAsDataURL(imageInput[0].files[0]);\n    }\n  }, {\n    key: 'downloadShareable',\n    value: function downloadShareable() {\n      var filename = this.toSlug(this.$postTitleField.val()) + '-post-shareable.png';\n      var link = document.getElementById('download-shareable');\n      link.href = this.canvas.canvas.toDataURL();\n      link.download = filename;\n    }\n  }, {\n    key: 'toSlug',\n    value: function toSlug(text) {\n      return text.toLowerCase().replace(/ /g, '-').replace(/[^\\w-]+/g, '');\n    }\n  }]);\n\n  return SquareShareables;\n}();\n\n;\n\njQuery(window).load(function () {\n  var squareShareables = new SquareShareables();\n});"]}