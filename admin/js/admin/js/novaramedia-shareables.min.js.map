{"version":3,"sources":["novaramedia-shareables.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","$","jQuery","Shareables","this","container","postTitleField","postImageField","postTextField","postUrlField","canvas","ShareableCanvas","bind","val","getPostData","value","_this2","on","generateShareable","_this3","postUrl","undefined","alert","data","action","ajax","url","ShareableVars","ajaxurl","type","success","response","ajaxSuccess","status","console","log","error","fillData","postData","text","tmp","document","createElement","innerHTML","textContent","innerText","post_title","post_image","stripHTML","post_content","_this4","stage","clear","update","title","image","link","loadedImage","Image","src","onload","event","drawBackground","addImage","addQuote","addTitle","addUrl","addLogo","window","load"],"mappings":"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","file":"novaramedia-shareables.min.js","sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true, esversion: 6 */\n\nvar $ = jQuery;\n\nvar Shareables = function () {\n  function Shareables() {\n    _classCallCheck(this, Shareables);\n\n    this.container = $('.shareable-container');\n\n    this.postTitleField = $('#shareable-post-title');\n    this.postImageField = $('#shareable-post-image');\n    this.postTextField = $('#shareable-post-text');\n    this.postUrlField = $('#shareable-post-url');\n\n    this.canvas = new ShareableCanvas({\n      'container': 'canvas-container'\n    });\n\n    // Bind stuff\n    this.bind();\n\n    if (!!this.postUrlField.val()) {\n      this.getPostData();\n    }\n  }\n\n  _createClass(Shareables, [{\n    key: 'bind',\n    value: function bind() {\n      var _this2 = this;\n\n      var _this = this;\n\n      $('#get-post-data').on('click', function () {\n        return _this2.getPostData($('#shareable-post-url').val());\n      });\n\n      $('#generate-shareable').on('click', function () {\n        return _this2.generateShareable();\n      });\n    }\n  }, {\n    key: 'getPostData',\n    value: function getPostData() {\n      var _this3 = this;\n\n      var postUrl = $('#shareable-post-url').val();\n\n      // Turn on Loading\n\n      // Load data\n      if (postUrl === undefined) {\n        return alert('Invalid post ID');\n      }\n\n      var data = {\n        'action': 'get_post_data',\n        'postUrl': postUrl\n      };\n\n      jQuery.ajax({\n        url: ShareableVars.ajaxurl,\n        type: 'get',\n        data: data,\n        success: function success(response) {\n          return _this3.ajaxSuccess(response, status);\n        }\n      });\n    }\n  }, {\n    key: 'ajaxSuccess',\n    value: function ajaxSuccess(response, status) {\n      console.log('response', response);\n      console.log('status', status);\n      if (!response) {\n        console.error(response.error);\n        alert(response.error);\n      } else if (response.type !== 'success') {\n        console.error(response.error);\n        alert(response.error);\n      } else if (response.type === 'success') {\n        this.fillData(response.postData);\n      }\n    }\n  }, {\n    key: 'stripHTML',\n    value: function stripHTML(text) {\n      var tmp = document.createElement(\"DIV\");\n      tmp.innerHTML = text;\n      return tmp.textContent || tmp.innerText || \"\";\n    }\n  }, {\n    key: 'fillData',\n    value: function fillData(data) {\n      // Set title\n      this.postTitleField.val(data.post_title);\n\n      // Set image\n      this.postImageField.val(data.post_image);\n\n      // Set text\n      this.postTextField.val(this.stripHTML(data.post_content));\n    }\n  }, {\n    key: 'generateShareable',\n    value: function generateShareable() {\n      var _this4 = this;\n\n      // Clean the canvas\n      this.canvas.stage.clear();\n      this.canvas.update();\n\n      // Get title\n      var title = this.postTitleField.val();\n\n      // Get image\n      var image = this.postImageField.val();\n\n      // Get text\n      var text = this.postTextField.val();\n\n      // Get URL\n      var link = this.postUrlField.val();\n\n      var loadedImage = new Image();\n      loadedImage.src = image;\n\n      loadedImage.onload = function (event) {\n\n        _this4.canvas.drawBackground();\n\n        _this4.canvas.addImage(image);\n\n        _this4.canvas.addQuote(text);\n\n        _this4.canvas.addTitle(title);\n\n        _this4.canvas.addUrl(link);\n\n        _this4.canvas.addLogo();\n      };\n    }\n  }]);\n\n  return Shareables;\n}();\n\n;\n\njQuery(window).load(function () {\n  var shareables = new Shareables();\n});"],"sourceRoot":"/source/"}